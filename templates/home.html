{% extends "base.html" %}

{% block content %}
<h1 style='text-align:center;'>Budget Tracker</h1>
<div class='theme-toggle'>
    <button onclick='switchTheme()' class='btn' style="width: auto; padding: 10px 20px;">Toggle Theme</button>
</div>
<p style='text-align:center;'>Logged in as <b>{{username}}</b> | <a href='/logout'>Logout</a></p>

<div class='card'>
<h3>Add Transaction</h3>
<form method='POST' action='/add'>
    <input type='date' name='date' value='{{today}}' required>
    <input type='number' name='amount' step='0.01' placeholder='Amount' required>
    <select name='category' required>
        <option value="" disabled selected>Select Category</option>
        <option value="Food">Food</option>
        <option value="Transport">Transport</option>
        <option value="Rent">Rent</option>
        <option value="Entertainment">Entertainment</option>
        <option value="Salary">Salary</option>
        <option value="Other">Other</option>
    </select>
    <select name='type'>
        <option value='income'>Income</option>
        <option value='expense'>Expense</option>
    </select>
    <input name='description' placeholder='Description (optional)'>
    <button class='btn'>Add</button>
</form>
</div>

<div class='card'>
<h3>Summary</h3>
<p><b>Total Income:</b> ${{income}}</p>
<p><b>Total Expense:</b> ${{expense}}</p>
<p><b>Net Balance:</b> ${{net}}</p>
</div>

<div class='card table-container'>
<h3>Transactions</h3>
<table>
<tr>
    <th>Date</th><th>Amount</th><th>Type</th><th>Category</th><th>Description</th><th></th>
</tr>
{% for row in rows %}
<tr>
    <td>{{row.date}}</td>
    <td>${{row.amount}}</td>
    <td>{{row.type}}</td>
    <td>{{row.category}}</td>
    <td>{{row.description}}</td>
    <td>
        <form method='POST' action='/delete/{{row.id}}' onsubmit="return confirm('Are you sure you want to delete this?');">
            <button class='delete-btn'>&times;</button>
        </form>
    </td>
</tr>
{% endfor %}
</table>
</div>
{% endblock %}